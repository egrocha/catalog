<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <link rel="stylesheet" href="assets/css/collapsible.css">

</head>
<body>
  <div class="vertical-menu">
    <nav class="nav js-nav">
      <header class="nav-header">
        <h1 class="nav-title"><strong>Catálogo</strong></h1>
      </header>

      <div id="region-div">
        <!--
        <button onclick="toggle(1)" type="button" class="region 1">Região 1</button>
        
        <button onclick="subtoggle(1)" type="button" class="maker 1">Produtor 1</button> 
        
        <button onclick="toggleImage(1)" type="button" class="wine 1">Vinho 1</button>
        
        <button onclick="subtoggle(2)" type="button" class="maker 1">Produtor 2</button> 

        <button onclick="toggleImage(2)" type="button" class="wine 2">Vinho 2</button>
        -->
      </div>
    </nav>
  </div>

  <div class="right-content">
    Teste
  </div>

  <main class="content js-content"></main>

  <script>
		var data = new Map();

    function populateMap(){
		  data.set(1, {
		  	"name": "Região 1",
		  	"children":{
		  		1: {
		  			"name": "Produtor 1",
		  			"children": {
		  				1: {"name": "Vinho 1"},
		  				2: {"name": "Vinho 2"}
		  			}
		  		},
		  		2: {
		  			"name": "Produtor 2",
		  			"children":{
		  				3: {"name": "Vinho 3"}
		  			}
		  		}
		  	}
		  });

		  data.set(2, {
		  	"name": "Região 2",
		  	"children":{
		  		3: {
		  			"name": "Produtor 3",
		  			"children":{
		  				4: {"name": "Vinho 4"}
		  			}
		  		}
		  	}
		  });
    }

    var tags = ['<button onclick="toggle(1)" type="button" class="region 1">Região 1</button>', 
    '<button onclick="subtoggle(1)" type="button" class="maker 1">Produtor 1</button>', 
    '<button onclick="toggleImage(1)" type="button" class="wine 1">Vinho 1</button>',
    '<button onclick="subtoggle(2)" type="button" class="maker 1">Produtor 2</button>',
    '<button onclick="toggleImage(2)" type="button" class="wine 2">Vinho 2</button>']

    function setTags(){
			var regionDiv = document.getElementById('region-div');
			var tag;
      var children;
			//TODO: GET KEYS FROM MAP INSTEAD OF ITERATING WITH A COUNTER
      //for(var key = 1; key <= data.size; key++){
      for(var [key, value] of data.entries()){
				tag = '<button onclick=\"toggle('+key+')\" type=\"button\" class=\"region '+key+'\">'+data.get(key).name+'</button>';
				regionDiv.insertAdjacentHTML( 'beforeend', tag);
        children = value.children;
        for(var [key2, value2] of Object.entries(children)){
          console.log(key2)
          console.log(value2)
        }
				//<button onclick="toggle(1)" type="button" class="region 1">Região 1</button>
      }
		}
		
    function setTags2(){
      var regions = document.getElementById('region-div');
      for(var i = 0; i < tags.length; i++){
        regions.insertAdjacentHTML( 'beforeend', tags[i]);
      }
    }

    window.onload = function(){
      populateMap();
      setTags();
    }

    var regionMap = new Map()
    var imageMap = new Map()

    function toggle(id){
      var menus = document.getElementsByClassName("maker " + id);
      for(var i=0; i<menus.length; i++){
        if(menus[i].style.display == "block"){
          menus[i].style.display = "none";
        }
        else{
          menus[i].style.display = "block";
        }
      }
    }

    function subtoggle(id){
      var menus = document.getElementsByClassName("wine " + id);
      for(var i=0; i<menus.length; i++){
        if(menus[i].style.display == "block"){
          menus[i].style.display = "none";
        }
        else{
          menus[i].style.display = "block";
        }
      }
    }
  </script>
</body>
</html>
